<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../ScssandCSS/navbarTest.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>
    @media screen {
        #printSection{
            display: none;
        }
    }
    @media print{
        body * {
            visibility: hidden;
        }
        #printSection, #printSection * {
            visibility: visible;
        }
        #printSection{
            position: absolute;
            left: 0;
            top: 0;
        }
        .modal-footer,#btnClose, #btnPrint, #modal_title{
            display: none;
        }
        .modal_content{
            padding: 0;
            border: none;
        }
    }
</style>
<body>
    <div class="container">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
            Open modal
        </button>
        <!-- <div id="printThis">
            <div class="modal fade" id="myModal">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content modal_content"  style="border: 2px solid #FB8500;">
                        <div class="modal-header modal_header">
                            <h1 class="modal-title" id="modal_title">Sign In</h1>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body" id="modal_body">
                            <form action="" id="userSignIn" onsubmit="return ValidateUser()" method="POST">
                                <div id="userEmailDiv">
                                    <span>Email or Phone</span>
                                    <input type="email" onfocus="Focus(event)" onblur="Blur(event)" name="" id="userEmail">
                                    <i class="fa fa-check-circle"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                    <small>Invalid Email Address or Password</small>
                                </div>
                                <div id="userPasswordDiv" class="">
                                    <span>Password</span>
                                    <input type="password" name="" onfocus="Focus(event)" onblur="Blur(event)" id="userPassword">
                                </div>
                                <div id="submitBtnDiv">
                                    <button type="submit" id="submitBtn" class="btn">Log In</button>
                                </div>
                            </form>
                            <div id="signUpBtnDiv" class="mt-5">
                                <p>Don't have an account yet?</p>
                                <span id="signUpBtn" onclick="ShowSignUpForm()" class="ml-2" >Sign Up</span>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" id="btnPrint" class="btn btn-primary">Print</button>
                          </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div id="printThis">
            <div class="modal fade" id="myModal">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content modal_content">
                        <div class="modal-header modal_header">
                            <h1 class="modal-title text-center" id="modal_title">Print Ticket</h1>
                            <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                        </div>
                        <div class="modal-body" id="modal_body">
                            <div id="ticketCon" style="background-image: url('../Images/8-88499_movie-roll-clip-art.png'); background-position: center; background-repeat: no-repeat; background-size: contain;">
                                <div id="primary">
                                    <div>
                                        <h3>CINEMA TICKET</h3>
                                    </div>
                                    <div id="tic_Infi" class="pb-2">
                                        <div>
                                            <p><b>Date:</b>05/08/2018</p>
                                            <p><b>Time:</b>9:00PM</p>
                                            <p><b>Seat No:</b>12</p>
                                        </div>
                                    </div>
                                </div>
                                <div id="secondary">
                                    <div>
                                        <h3>ADMIT ONE</h3>
                                    </div>
                                    <div>
                                        <h6>Movie Ticket</h6>
                                    </div>
                                    <div id="barcodeDiv">
                                        <i class="fa fa-barcode"></i>
                                        <p></p>
                                    </div>
                                </div>
                            </div>
                            <div id="ticketCon" style="background-image: url('../Images/8-88499_movie-roll-clip-art.png'); background-position: center; background-repeat: no-repeat; background-size: contain;">
                                <div id="primary">
                                    <div>
                                        <h3>CINEMA TICKET</h3>
                                    </div>
                                    <div id="tic_Infi" class="pb-2">
                                        <div>
                                            <p><b>Date:</b>05/08/2018</p>
                                            <p><b>Time:</b>9:00PM</p>
                                            <p><b>Seat No:</b>12</p>
                                        </div>
                                    </div>
                                </div>
                                <div id="secondary">
                                    <div>
                                        <h3>ADMIT ONE</h3>
                                    </div>
                                    <div>
                                        <h6>Movie Ticket</h6>
                                    </div>
                                    <div id="barcodeDiv">
                                        <i class="fa fa-barcode"></i>
                                        <p></p>
                                    </div>
                                </div>
                            </div>
                            <div id="ticketCon" style="background-image: url('../Images/8-88499_movie-roll-clip-art.png'); background-position: center; background-repeat: no-repeat; background-size: contain;">
                                <div id="primary">
                                    <div>
                                        <h3>CINEMA TICKET</h3>
                                    </div>
                                    <div id="tic_Infi" class="pb-2">
                                        <div>
                                            <p><b>Date:</b>05/08/2018</p>
                                            <p><b>Time:</b>9:00PM</p>
                                            <p><b>Seat No:</b>12</p>
                                        </div>
                                    </div>
                                </div>
                                <div id="secondary">
                                    <div>
                                        <h3>ADMIT ONE</h3>
                                    </div>
                                    <div>
                                        <h6>Movie Ticket</h6>
                                    </div>
                                    <div id="barcodeDiv">
                                        <i class="fa fa-barcode"></i>
                                        <p></p>
                                    </div>
                                </div>
                            </div>
                            <div id="ticketCon" style="background-image: url('../Images/8-88499_movie-roll-clip-art.png'); background-position: center; background-repeat: no-repeat; background-size: contain;">
                                <div id="primary">
                                    <div>
                                        <h3>CINEMA TICKET</h3>
                                    </div>
                                    <div id="tic_Infi" class="pb-2">
                                        <div>
                                            <p><b>Date:</b>05/08/2018</p>
                                            <p><b>Time:</b>9:00PM</p>
                                            <p><b>Seat No:</b>12</p>
                                        </div>
                                    </div>
                                </div>
                                <div id="secondary">
                                    <div>
                                        <h3>ADMIT ONE</h3>
                                    </div>
                                    <div>
                                        <h6>Movie Ticket</h6>
                                    </div>
                                    <div id="barcodeDiv">
                                        <i class="fa fa-barcode"></i>
                                        <p></p>
                                    </div>
                                </div>
                            </div>
                            <div id="ticketCon" style="background-image: url('../Images/8-88499_movie-roll-clip-art.png'); background-position: center; background-repeat: no-repeat; background-size: contain;">
                                <div id="primary">
                                    <div>
                                        <h3>CINEMA TICKET</h3>
                                    </div>
                                    <div id="tic_Infi" class="pb-2">
                                        <div>
                                            <p><b>Date:</b>05/08/2018</p>
                                            <p><b>Time:</b>9:00PM</p>
                                            <p><b>Seat No:</b>12</p>
                                        </div>
                                    </div>
                                </div>
                                <div id="secondary">
                                    <div>
                                        <h3>ADMIT ONE</h3>
                                    </div>
                                    <div>
                                        <h6>Movie Ticket</h6>
                                    </div>
                                    <div id="barcodeDiv">
                                        <i class="fa fa-barcode"></i>
                                        <p></p>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="btnClose" data-dismiss="modal">Close</button>
                            <button type="button" id="btnPrint" class="btn btn-primary">Print</button>
                          </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="contain">
        <div id="seatDiv">
            
        </div>
    </div>
    <div>
        <button onclick="print()">Date</button>
        <!-- <h3 id="result"></h3> -->
    </div>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- <script src="../javaScript/AvailableMovieInSelectedCinema.js"></script> -->
<!-- <script src="../javaScript/SignIn.js"></script> -->
<script src="../javaScript/SignUp.js"></script>
<script>
        document.getElementById("btnPrint").onclick = 
        function() {
            printElementt(document.getElementById("printThis"))
        }
        function printElementt(params) {
            var domClone = params.cloneNode(true)

            var $printSection = document.getElementById("printSection")
                if (!$printSection) {
                var $printSection = document.createElement("div")
                $printSection.id = "printSection";
                document.body.appendChild($printSection)
            }
            $printSection.innerHTML = ""
            $printSection.appendChild(domClone)
            window.print()
        }
        // function Print(params) {
        //     document.getElementById("nonPrintable").className += "noPrint"
        //     window.print()
        // }
        
</script>
<!-- <script>
    let currentt = new Date()
    let date = new Date('8/12/2021 12:31:00 PM')
    console.log(currentt.getTime());
    console.log(date.getTime());
    console.log(currentt.getMonth());
    console.log(date.getMonth());
    

    document.getElementById('date').addEventListener('click', function () {
        let ms1 = currentt.getTime()
        let ms2 = date.getTime()
        document.getElementById('result').innerText = ms2 > ms1
    })
    let current = new Date()
    // let date = new Date('8/13/2021')
    for (let i = 0; i < 1; i++) {
        let z = cinemaJson[i]
        console.log(z);
            for (let j = 0; j < 1; j++) {
                let y = z.cinema[1]
                console.log(y.name);
                    for (let k = 0; k < y.movies.length; k++) {
                        let x = y.movies[k]
                        if (new Date(x.date).getTime() < current.getTime()) {
                            y.nowShowing.push(x)
                            console.log(x.name);
                        }
                        if (new Date(x.date).getTime() > current.getTime()) {
                            y.upcomingMovies.push(x)
                            console.log(x.name);
                        }
                    }
                    console.log(y.upcomingMovies);
                    console.log(y.nowShowing);
            }
    }
</script> -->
<!-- <script>
    let loggedInUserInfo
    let newUserr = [{userName: "Habeeb", emailAddress: "tawaliu@gmail.com", passWord: "jadesola"}, {userName: "Habeebb", emailAddress: "tawaliuu@gmail.com", passWord: "jadesolaa"}, {userName: "Habeebbb", emailAddress: "tawaliuuu@gmail.com", passWord: "jadesolaaa"}]
    function ValidateUser(params) {
        let inputs = document.querySelectorAll('form#userSignIn input')
        let seenEmailAddress = false
        for (let i = 0; i < newUserr.length; i++) {
            let a = newUserr[i]
            if (inputs[0].value == a.emailAddress) {
                if (inputs[1].value != a.passWord) {
                    seenEmailAddress == false
                    inputs[0].parentElement.className = 'error'
                    return false
                }
                seenEmailAddress = true
                console.log(a);
                loggedInUserInfo = a
            }
            if (i == newUserr.length -1 && seenEmailAddress == false) {
                inputs[0].parentElement.className = 'error'
                return false
            }
        }
        return true
    }
    function ShowSignUpForm(params) {
        document.getElementById('modal_body').innerHTML = 
        `
        <form action="" id="userSignUp" onsubmit="return ValidateForm()" method="POST">
            <div id="newUserUsernameDiv" class="">
                <span>Username</span>
                <input type="text" name="Username" id="newUserUsername" onfocus="Focus(event)" onblur="Blur(event)">
                <i class="fa fa-check-circle"></i>
                <i class="fa fa-exclamation-circle"></i>
                <small>Username must be alphanumeric and contain 5 - 12 characters</small>
            </div>
            <div id="newUserEmailDiv" class="">
                <span>Email</span>
                <input type="email" name="Email" id="newUserEmail" onfocus="Focus(event)" onblur="Blur(event)">
                <i class="fa fa-check-circle"></i>
                <i class="fa fa-exclamation-circle"></i>
                <small>Email must be a valid address e.g example@mydomain.com</small>
            </div>
            <div id="newUserPasswordDiv" class="">
                <span>Password</span>
                <input type="password" name="Password" id="newUserPassword" onfocus="Focus(event)" onblur="Blur(event)">
                <i class="fa fa-check-circle"></i>
                <i class="fa fa-exclamation-circle"></i>
                <small>Password must be alphanumeric and to be 8 - 20 characters</small>
            </div>
            <div id="newUserConfirmPasswordDiv" class="">
                <span>Confirm Password</span>
                <input type="password" name="ConfirmPassword" id="newUserConfirmPassword" onfocus="Focus(event)" onblur="Blur(event)">
                <i class="fa fa-check-circle"></i>
                <i class="fa fa-exclamation-circle"></i>
                <small>Incorrect</small>
            </div>
            <div id="submitBtnDiv">
                <button type="submit" id="submitBtn" class="btn">Sign Up</button>
            </div>
        </form>
        <div id="signUpBtnDiv" class="mt-5">
            <p>Already have an account</p>
            <span id="signUpBtn" class="ml-2" onclick="ShowSignInForm()">Sign in</span>
        </div>
        `
        AddListenersToInput()
        document.getElementById('modal_title').innerHTML = 'Sign Up'
    }
    function ShowSignInForm(params) {
        document.getElementById('modal_body').innerHTML =
        `
        <form action="" id="userSignIn" onsubmit="return ValidateUser()" method="POST">
            <div id="userEmailDiv">
                <span>Email or Phone</span>
                <input type="email" onfocus="Focus(event)" onblur="Blur(event)" name="" id="userEmail">
                <i class="fa fa-check-circle"></i>
                <i class="fa fa-exclamation-circle"></i>
                <small>Invalid Email Address or Password</small>
            </div>
            <div id="userPasswordDiv" class="">
                <span>Password</span>
                <input type="password" name="" onfocus="Focus(event)" onblur="Blur(event)" id="userPassword">
            </div>
            <div id="submitBtnDiv">
                <button type="submit" id="submitBtn" class="btn">Log In</button>
            </div>
        </form>
        <div id="signUpBtnDiv" class="mt-5">
            <p>Don't have an account yet?</p>
            <span id="signUpBtn" onclick="ShowSignUpForm()" class="ml-2" >Sign Up</span>
        </div>
        `
    }
</script> -->
<!-- <script>
    let patterns = {
        Username: /^[a-z\d]{5,12}$/i,
        Password: /^[\w@-]{8,20}$/,
        Email: /^([a-zA-Z\d\.-]+)@([a-z\d]+)\.([a-z]{2,8})(\.[a-z]{2,8})?$/
    }
    let myUsers = [

    ]
    function ValidateForm() {
        let allInputParent = document.querySelectorAll('form#userSignUp div')
        for (let i = 0; i < allInputParent.length-1; i++) {
            if (allInputParent[i].className == 'error' || allInputParent[i].className == '') {
                return false
            }
        }
        let allInput = document.querySelectorAll('form#userSignUp input')
        let newUser = {userName: "", emailAddress: "", passWord: ""}
        for (let i = 0; i < allInput.length-1; i++) {
            let a = allInput[i]
            if (i == 0) {
                newUser.userName = a.value;
            }
            else if (i == 1) {
                newUser.emailAddress = a.value;
            }
            else if (i == 2) {
                newUser.passWord = a.value
            }  
        }
        myUsers.push(newUser)
        console.log(myUsers);
        localStorage.setItem('MyUsers', JSON.stringify(myUsers))
        return false
    }
    function AddListenersToInput() {
        let inputs = document.querySelectorAll('#userSignUp input')
        inputs.forEach((input) => {
            input.addEventListener('keyup', (e) => {
                if (e.target.attributes.name.value == 'ConfirmPassword') {
                    CheckConfirmPassword(e.target, e.target.parentElement)
                    return;
                }
                CheckInputValidity(e.target, patterns[e.target.attributes.name.value], e.target.parentElement)
            }) 
        })
    }
    function CheckInputValidity(field, regex, fieldParent) {
        if (regex.test(field.value)) {
            fieldParent.className = 'success'
        }
        else{
            fieldParent.className = 'error'
        }
    }
    function CheckConfirmPassword(confirmField, fieldParent) {
        console.log(confirmField.value);
        if (confirmField.value == document.getElementById('newUserPassword').value &&  document.getElementById('newUserPassword').value != "") {
            fieldParent.className = 'success'
        }
        else{
            fieldParent.className = 'error'
        }
    }
    function Focus(e) {
        if (e.target.value == "") {
            e.target.previousElementSibling.classList.remove('gh')
            e.target.previousElementSibling.classList.add('gg')
        }
    }
    function Blur(e) {
        if (e.target.value == "") {
            e.target.previousElementSibling.classList.remove('gg')
            e.target.previousElementSibling.classList.add('gh')
        }
    }
    
</script> -->
 
<!-- <script>
(function() {
    'use strict';
    window.addEventListener('load', function() {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.getElementsByClassName('needs-validation');
      // Loop over them and prevent submission
      var validation = Array.prototype.filter.call(forms, function(form) {
        form.addEventListener('submit', function(event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
  </script> -->
<script>




    // let date = new Date()
    // console.log(date);



    // console.log(cinemaJson);
    // let a = 70
    // for (let i = 0; i < cinemaJson.length; i++) {
    //     let a = cinemaJson[i]
    //     console.log(a.state);
    //     // console.log(a.cinema[].noOfSeat);
    //     for (let j = 0; j < a.cinema.length; j++) {
    //         let b = a.cinema[j]
    //         console.log(b.noOfSeat);
    //     }

    // }
    // function Seat(params) {
        
    //     for (let i = 0; i <= a; i++) {
    //         document.getElementById('seatDiv').innerHTML += 
    //         `
    //         <div id="seatNo">
    //             ${i}
    //         </div>
    //         `
    //     }
    // }
    // Seat()
</script>